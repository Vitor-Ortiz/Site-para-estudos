<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevStudy | Pentest Lab</title>
    
    <link rel="stylesheet" href="../assets/css/base.css">
    <link rel="stylesheet" href="../assets/css/header.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    <link rel="stylesheet" href="../assets/css/pentest.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* CSS EXTRA PARA O PAINEL DE MISSÃO */
        .mission-panel {
            background: #111; border: 1px solid #333; padding: 15px;
            margin-bottom: 20px; border-radius: 8px; display: flex; 
            justify-content: space-between; align-items: center; gap: 15px;
        }
        .mission-select {
            background: #000; color: white; border: 1px solid #444; padding: 10px;
            border-radius: 5px; font-family: 'Fira Code'; flex: 1;
        }
        .flag-input-group { display: flex; gap: 10px; flex: 2; }
        .flag-input {
            flex: 1; background: #000; border: 1px solid #333; color: #4ade80;
            padding: 10px; font-family: 'Fira Code';
        }
        .btn-submit-flag {
            background: #4ade80; color: black; border: none; padding: 0 20px;
            font-weight: bold; cursor: pointer; font-family: 'Fira Code';
        }
        .btn-submit-flag:hover { background: #22c55e; }
        
        @media (max-width: 768px) {
            .mission-panel { flex-direction: column; }
            .flag-input-group { width: 100%; }
        }
    </style>
</head>
<body>
    <header></header>

    <div class="container">
        <section class="pentest-hero">
            <div class="hacker-icon"><i class="fas fa-user-secret"></i></div>
            <h1>Laboratório de Segurança</h1>
            <p>Selecione uma missão, invada o sistema e descriptografe a Flag.</p>
        </section>

        <div class="mission-panel">
            <select id="mission-selector" class="mission-select" onchange="mudarMissao()">
                <option value="missao_01">Missão 01: O Arquivo Oculto (Fácil)</option>
                <option value="missao_02">Missão 02: Criptografia César (Médio)</option>
            </select>
            
            <div class="flag-input-group">
                <input type="text" id="flag-input" class="flag-input" placeholder="Cole a FLAG aqui (Ex: FLAG{...})">
                <button class="btn-submit-flag" onclick="verificarFlag()">ENVIAR</button>
            </div>
        </div>

        <div class="pentest-grid">
            
            <div class="hack-card">
                <div class="hack-header"><i class="fas fa-key"></i> Decodificador César</div>
                <div class="hack-body">
                    <div class="input-group-hack">
                        <label>Texto Criptografado</label>
                        <input type="text" id="cesar-input" placeholder="Cole o texto estranho aqui...">
                    </div>
                    <div class="input-group-hack">
                        <label>Shift (Tente 3, 4, 5...)</label>
                        <input type="number" id="cesar-shift" value="3">
                    </div>
                    <div class="hack-actions">
                        <button class="btn-hack" onclick="cesarCipher(true)">ENCRIPTAR</button>
                        <button class="btn-hack outline" onclick="cesarCipher(false)">DECRIPTAR</button>
                    </div>
                    <div class="hack-result" id="cesar-result">---</div>
                </div>
            </div>

            <div class="hack-card">
                <div class="hack-header"><i class="fas fa-file-code"></i> Base64 Tool</div>
                <div class="hack-body">
                    <textarea id="base64-input" class="hack-textarea" placeholder="Digite aqui..."></textarea>
                    <div class="hack-actions">
                        <button class="btn-hack" onclick="base64Action(true)">ENCODE</button>
                        <button class="btn-hack outline" onclick="base64Action(false)">DECODE</button>
                    </div>
                    <div class="hack-result" id="base64-result">---</div>
                </div>
            </div>

            <div class="hack-card full-width terminal-card">
                <div class="hack-header"><i class="fas fa-terminal"></i> root@kali:~</div>
                <div class="terminal-window" id="terminal-output">
                    <div class="line">Kali Linux Simulator v2.0 initialized...</div>
                    <div class="line" style="color: #facc15">SISTEMA ONLINE. Selecione uma missão acima.</div>
                </div>
                <div class="terminal-input-area">
                    <span class="prompt">$</span>
                    <input type="text" id="terminal-input" autocomplete="off" autofocus>
                </div>
            </div>

        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="../game-data.js"></script>
    <script src="../assets/js/header.js"></script>
    <script src="../assets/js/pentest.js"></script>
</body>
</html>